# 说说virtual Dom

React会将我们编写的JSX代码转化为一个JavaScript对象，然后将这个JavaScript转换为真实的DOM，这个JavaScript对象就是虚拟Dom。

当我们触发状态更新时，React会调用对应的组件的渲染方法，返回新的JSX对象，然后判断新的JSX对象和之前的虚拟DOM节点之间的差异，并记录这些差异，并在渲染阶段新增、删除或修改对应的节点，减少不必要的DOM节点操作，因为操作DOM节点很耗费性能。

## 为什么使用虚拟DOM

- 提高开发效率。React是一个声明式的UI框架，他让我们在开发的过程中聚焦于数据，而React则通过虚拟DOM确保数据映射与DOM结点一致，接管了修改Dom的过程，我们可以更加关注我们的业务逻辑而非DOM操作，提高了开发效率
- 修改过程中的性能提升。虚拟DOM可以提升性能，但是是分场景的，虽然直接操作DOM是很耗费性能的，但是React使用虚拟DOM也不能避免操作DOM，所以对于必要的DOM修改还是必要的。并且对于首次渲染，虚拟DOM也没有优势，它还要生成一个对应的JS大对象，消耗更多的内存。虚拟DOM的优势在于React的diff算法和批处理策略，它用自己的策略帮助我们最小化及最优化地进行DOM的增加、删除以及修改，在重复渲染时帮助我们计算如何更高效地更新。
- 跨平台兼容。React框架不仅应用于浏览器，还应用于移动端，桌面端等，而这些宿主环境不一定存在DOM结点，而JS对象在JS运行时环境下是存在的，所以我们可以跨平台用相同的JS数据结构描述UI。

## 缺点

- 首次渲染变慢
- 需要维护一个JS对象，占用更多内存
- 对于少量更改来说，虚拟DOM可能更慢





