# 字节跳动飞书一面(60min)

看代码说输出，var全局污染相关的。

看代码说输出，任务循环相关的，有Promise，async、await、setTimeout，挺长一段有点恐怖，我也不知道答对没

实现一个memo函数。用闭包实现了，然后他给了个情况，大概意思就是我原来闭包值是undefined的话还会重复计算，然后我就用了Symbol来判断之前是否执行过。然后他说想根据不同入参记忆，然后我说闭包里面搞个对象存，对象的键是是用入参算出来的，对象的值就是对应的计算的记忆值，然后判断对象键是否存在来判断是否执行过。

写代码，写一个输入N，返回0到N-1组成的乱序数组，（要完全乱序），问了事件复杂度。O(n)

手写深拷贝，只有基础类型、对象和数组，没有Map和Set？写了个递归版，问我为啥要用map存对象引用？防止拷贝出来某些值得指向和原始对象不一致。for of 可以对哪些对象使用？有迭代器的。迭代版讲下思路？我说类似于树的层序遍历那样拷贝。还有啥方式？说了JSON.parse(JSON.stringify(obj))

讲一讲JSX？简化我们写React.createElement的过程，会经过babel编译。讲一下React.createElement的三个参数？type，props，children。讲一下第一个参数的类型？小写就是字符串类型，大写就是引用类型(好像漏回答React.Fragement了)

讲一讲React事件，流程、好处，React事件触发流程？都是捕获-冒泡吗？有别的吗？这个不清楚（后来看文档发现有些事件比如onMouseEnter的触发机制不同，而且也没有捕获阶段）。有没有因为React事件遇到过相关Bug？有，用到一些库的实现是原生绑定，当子组件React事件绑定，祖先组件原生事件绑定，结果祖先组件的事件先触发了。除了人为避免之外怎么解决？我说设计成兄弟组件，互不影响。（后面想想应该是想要我回答React.createPortal，可惜了没答上来）。React17后把事件挂在的对象由document改成了root Element，了解这个吗？不了解。猜测一下大概为啥要这样做？答：可能是以后在一个页面里有多个React项目，类似微服务那样，大家都挂在在document的话，多个项目之间会冲突，挂在root Element的话避免冲突。

项目中有个渲染优化相关的，他问我从网络的和渲染的方面讲讲怎么优化的？讲了下请求返回结果字段筛选，gzip压缩，以及升级了antd的组件，让Tree组件支持长列表。长列表的原理？只渲染可视窗口内的节点。http传的是json吗？是。有没有考虑过传其他类型的东西？我说这个没考虑过(现在也没想出来返回结果还能怎么优化。。。。protoBuffer？)

