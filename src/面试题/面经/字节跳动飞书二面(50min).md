# 字节动飞书二面

讲一下项目，渲染优化怎么做的？讲了从请求、用长列表，及JS的执行3个方面。大数据量存在前端刷新从内存中读，如果发生变化怎么办？我说可以websocket后端数据触发变化通知前端重新获取，他问还有更好的方法吗？暂时想不到

我感觉你这个渲染时间还有600ms左右我觉得还有优化空间，如果是你的话你会怎么优化？我说当时客户和产品对渲染速度都满意了，所以没有进一步优化，可能会去看源码它执行过程哪里耗时最多。

问了下V8引擎怎么执行JS的？把词法分析、语法分析、生成抽象语法树并解释器解释执行字节码，热点代码编译成机器码的过程讲了一遍。为什么机器码内存占用比字节码大？我说就是比它大啊。。。。不知道怎么答。V8执行过程中还有什么优化？我说有多层变量引用时候会有变量提升，然后没了，问了他还有啥优化，他说V8会根据CPU之类的资源做特定优化，把变量放到最优位置。

问项目亮点，我说这个项目中有特别多的资源上传，我写了个大文件分片上传，提升了资源的上传速度。

问大文件分片上传实现原理，用File.prototype.slice，web worker和主线程传递的什么类型？blob。和主线程通信传字符串和引用类型的区别。页面刷新的话，如何继续上传？调接口查当前上传状态。

给了个在线协作如何解决冲突的场景题，还有离线很久的人突然联网了怎么解决和在线的冲突，我搭不上，又问了我git拉代码怎么解决冲突，也没答上，问了git pull的时候拉的什么，我说commit，和diff部分，总之这部分尬了20分钟左右，感觉答崩了。

问我项目现场出问题了咋办，因为我们项目很特殊，无法通过外网访问，只能通过向日葵等工具连接内网机器使用，只能通过看控制台找bug，他说这样效率太低了，如果是你的话，有没有什么解决方案？我说搭个错误日志平台，收集前端的问题，他说还有呢？我说暂时想不到，他说作为员工需要主动推动效率问题，这个确实，我确实没有在这方面深入思考过。

问了个股票只能买卖一次的问题，然后我一开始没看到最后的买卖一次，写成了买卖多次，他说我写错了，我说看错题目然后重新写了买卖一次的版本。

问我有没有什么要问他的，因为我感觉面得很崩，所以说我觉得自己这次面试发现自己很多不足的。

二面面完巨难受，躺在床上刷抖音结果来电话说过了约三面，奇妙。

