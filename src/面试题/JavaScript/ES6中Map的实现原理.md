# ES6中Map的实现原理

先讲一下为什么要有Map，ES6之前有很多人通过对象的键值对模拟Map，但是这有个问题m，JS的Map的键名只能是字符串，当使用数字时也会被转为字符串，当使用引用类型当键名时，会先调用引用类型的toString方法(从原型链网上找)转为字符串，对于对象来说就是调用Object.prototype.toString()返回'[Object object]'，所以使用对象模拟Map会有问题。

## Map实现原理

主要的数据结构是数组和链表，通过对key进行hash并用hash值对数组的长度length求余让得出的值落在0到length-1的下标中，如果对应的下标值为空则新增一个链表，并将链表头的值设为对应的key，hash和value。后续的新增也是通过这种方式，如果hash后对数组长度求余冲突了就会判断值是否在链表中，不在则插在链表后，在则进行替换。删除则是到对应数组下标的链表中去找到对应的key值并删除。