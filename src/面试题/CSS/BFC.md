# BFC原理及应用

## 常见定位方案

- 普通流(normal flow)

  在普通流中，元素按照其在 HTML 中的先后位置至上而下布局，在这个过程中，行内元素水平排列，直到当行被占满然后换行，块级元素则会被渲染为完整的一个新行，除非另外指定，否则所有元素默认都是普通流定位，也可以说，普通流中元素的位置由该元素在 HTML 文档中的位置决定。

- 浮动 (float)

  在浮动布局中，元素首先按照普通流的位置出现，然后根据浮动的方向尽可能的向左边或右边偏移，其效果与印刷排版中的文本环绕相似。

- 绝对定位 (absolute positioning)

  在绝对定位布局中，元素会整体脱离普通流，因此绝对定位元素不会对其兄弟元素造成影响，而元素具体的位置由绝对定位的坐标决定。

## 原理

FC(Formatting Contexts)格式化上下文，指的是页面中的一块渲染区域，并且有一套渲染规则，它决定了它的子元素将如何定位，以及和其他元素的关系和相互作用。

具有BFC特性的元素可以看做是隔离的容器，容器里的元素不会在布局上影响到外面的元素，并且BFC具有普通容器所没有的一些特性。

**回答BFC是什么**：BFC是页面中的一块渲染区域，可以看做是隔离的容器，它决定了它的子元素将如何定位，以及和其他元素的关系和相互作用，容器里的元素不会在布局上影响到外面的元素，并且BFC具有普通容器所没有的一些特性。

## 如何触发BFC

常见的元素触发BFC特性的条件：

- 根元素`<html>`
- 浮动元素：float除none以外的值
- 绝对定位元素：absolute、fixed
- display为inline-block、table-cells、flex
- overflow为visible以外的值(hidden、auto、scroll)

## BFC特性

- **同一个BFC下外边距会发生折叠**。这不是CSS的bug，可以理解为一种规范，**如果想要避免外边距的重叠，可以将其放在不同的 BFC 容器中**
- **计算BFC高度时，浮动元素也参与计算，也即BFC可以包含浮动的元素**。可以用这个特性来**清除浮动**。浮动的元素会脱离文档流，如果容器里只有浮动元素或者其他元素没有浮动元素高，则会发生“坍塌”，我们可以使用`overflow:hidden`触发容器的BFC，那么容器将会包裹着浮动元素。
- **BFC的区域不会和浮动元素重叠，也就是BFC可以阻止元素被浮动元素覆盖**。可以在同级的被浮动元素覆盖的元素触发BFC来避免。
- **每个元素的margin box的左边， 与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。**所以容器内的元素的左边，和容器的左边贴着

## BFC使用目的

- 清除浮动
- 属于不同BFC的元素可以阻止margin重叠
- 放置元素被浮动元素覆盖





