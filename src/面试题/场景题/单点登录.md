# 单点登录(SSO)

单点登录是指在多个应用系统中，只需要登录一次，就可以访问其他互相信任的应用系统。

技术实现是基于cookie实现的。

流程：

**初次登录A应用，且没在CAS登录过：**

1. 当我们进入A应用页面时，这个时候系统判定我们还未登录，将我们重定向到CAS(中心认证系统)，通过url encoded带上A应用的地址。
2. 我们访问到CAS的页面，CAS发现我们还没登录，重定向到CAS的登录页，即要我们填写登录表单
3. 我们在CAS发起登录请求，CAS验证通过，返回set-cookie带上我们在CAS的登录信息，并且重定向到A应用，并且带上本次登录的ticket
4. 我们重定向到A应用，A应用通过url获取到我们在CAS拿到的ticket，用这个ticket向CAS进行验证，验证通过之后A应用返回set-cookie带上我们在A应用的登录信息，并且将我们重定向到A应用的某个页面
5. 我们重定向到A应用的页面并且带上了cookie，A应用验证cookie合法后返回相应页面。

这个过程我们一共发起了4个get请求用于请求页面和重定向，一个post请求用于登录

**初次登录B应用，在CAS登录过：**

1. 进入B页面，没有B的cookie，尚未登陆过，B应用把我们重定向到CAS
2. 由于我们之前在CAS登陆过了，会带上CAS的cookie，CAS判定我们登录过，并把我们重定向到B的页面并带上ticket
3. 我们带着ticket访问B应用，B应用使用是这个ticket去CAS验证，验证通过，返回设置set-cookie，并且重定向到B应用的一个页面
4. 访问B应用的页面，带上cookie，B应用验证通过，返回页面内容

这个过程我们发起了4个get请求和重定向



参考资料：

[单点登录](https://developer.aliyun.com/article/636281)